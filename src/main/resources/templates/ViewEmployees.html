<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
  <title>View Appointments</title>
	
	<meta charset="ISO-8859-1" />
  	<meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="#" rel="shortcut icon">
    
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js">   </script>
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
	<link rel="stylesheet" th:href="@{/css/style.css}">
	<link rel ="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.2/css/all.min.css"  />

<script>

$(document).ready(function(){
	$('#depttable').DataTable();
});

function getdepartmentbyemp(eid)
{
	//alert("company ID = "+cid);
	let dept_arr="";
	var app_name = $('#app_name').val();
// 	$('#depttable').dataTable().fnClearTable();
// 	$('#depttable').dataTable().fnDestroy();
	$('#depttable').DataTable();
// 	$.ajax({
// 		//url      : "/"+app_name+"/getdeptbycompid/"+cid,
// 		url		: '/getdeptbyempid/'+eid,
// 		type	:	'GET',
// 		dataType: 	'JSON',
// 		success : function(result)
// 		{
// 			let cnt =1;
// 			for(let i=0;i<result.length;i++) 
// 			{
// 				//alert(result[i].department.company.comp_name);
// 				dept_arr =  dept_arr 
// 							+"<tr><td>" +(cnt++)
// 							+"</td><td>"+result[i].emp_name
// 							+"</td><td>"+result[i].department.dept_name
// 							+"</td><td>"+result[i].department.company.comp_name	
// 							+"</td><td><a href='/editdeptbyid/"+result[i].dept_id+"'>Edit</a></td></tr>"
// 			}
// 			$(dept_arr).appendTo('#deptbody');
// 			$('#depttable').DataTable();
// 		}
// 	});
}

  </script>
 </head>
<body>


<div class="container" >
	
 <!-- start: PAGE HEADER -->
		<div class="row">
			<div class="col-sm-12">
				
				<!-- start: PAGE TITLE & BREADCRUMB -->
				<ol class="breadcrumb">
					<li class="breadcrumb-item">
						<a th:href="@{/adminhome}">
							<i class="fa fa-home "></i>&nbsp;	Home
						</a>
					</li>
					<li class="breadcrumb-item active" aria-current="page">
						View Employee
					</li>
					
				</ol>
			</div>
		</div>
				
		<div th:if="${response}" >	
			<h6 th:text="${response}" class="alert alert-success"></h6>
		</div>
		
		<div th:if="${reserr}" >
			<h6 th:text="${reserr}" class="alert alert-danger"></h6>
		</div>				
		<div class="card">
			<div class="card-header">
				<h4>Employees List
<!-- 					<input type="hidden" id="app_name" name="app_name" th:value="${appname}"/>	 -->
					<a th:href="@{/adddepartment}" class="btn btn-primary" style="float:right;">Add Department</a>
				</h4>
			</div>
		 <div class="card-body">

			<div class="table-responsive-sm" >
				<table class="table table-bordered table-striped" id="depttable" style="text-decoration:none;">
					<thead style="background-color:#3fbdeb;color:white;">
						<tr>
							<th>Sr No.</th>
							<th>Name</th>
							<th>Email</th>
							<th>Status</th>
							<th>Department</th>
							<th>Company Name</th>
							<th>Action</th>
						</tr>	
					</thead>
					<tbody id="deptbody">
						<th:block th:each="emp : ${elist}">
							<td >[[${empStat.count}]]</td>
							<td >[[${emp.emp_name}]]</td>
							<td >[[${emp.emp_email}]]</td>
							<td >[[${emp.emp_status}]]</td>
							<td >[[${emp.department.dept_name}]]</td>
							<td >[[${emp.department.company.comp_name}]]</td>
							
							<td ><a th:href="@{'/editdeptbyid/'+${emp.emp_id}}">Edit</a></td>
							
						</th:block>
					</tbody>
				</table>
			</div>
    	</div>
      </div>
    </div>

	<script th:src="@{/js/viewdepartment.js}"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
 </body>
 </html>